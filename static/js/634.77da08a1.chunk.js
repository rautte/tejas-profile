"use strict";(self.webpackChunktejas_profile=self.webpackChunktejas_profile||[]).push([[634],{634:(n,t,e)=>{e.r(t),e.d(t,{firebaseAdapter:()=>s});var o=e(64),r=e(800);function s(){const{db:n}=function(){if(!window||!window.__FIREBASE)throw new Error("Firebase config missing. Provide window.__FIREBASE in index.html.");const n=window.__FIREBASE;let t=(0,o.Dk)()[0]||(0,o.Wp)(n);return{app:t,db:(0,r.C3)(t)}}();let t=null,e=null,s=null,i=null;return{create:async function(t){e=`/rooms/${t}`;const o=(0,r.KR)(n,e);(await(0,r.Jt)(o)).exists()||await(0,r.hZ)(o,{createdAt:Date.now()})},join:async function(t){e=`/rooms/${t}`;const o=(0,r.KR)(n,e);if(!(await(0,r.Jt)(o)).exists())throw new Error("ROOM_NOT_FOUND")},leave:function(n){return t&&(t(),t=null),i&&((0,r.TF)(i).catch(()=>{}),i=null),s=null,e=null,Promise.resolve()},append:async function(t,o){if(e||(e=`/rooms/${t}`),"hello"===o.t){s=o.by;const t=(0,r.KR)(n,`${e}/presence`),a=await(0,r.Jt)(t),c=a.exists()?a.val():{};if("host"===o.by&&c.host)throw new Error("HOST_TAKEN");if("guest"===o.by&&c.guest)throw new Error("GUEST_TAKEN");i=(0,r.jf)(t,o.by),await(0,r.hZ)(i,!0);try{(0,r.yX)(i).remove()}catch{}}const a=(0,r.KR)(n,`${e}/events`);await(0,r.VC)(a,o)},onSnapshot:function(o,s){e||(e=`/rooms/${o}`);const i=(0,r.KR)(n,`${e}/events`),a=(0,r._O)(i,n=>{const t=n.val();s({events:[t]})});return t=()=>{(0,r.AU)(i,"child_added",a)},t}}}}}]);
//# sourceMappingURL=634.77da08a1.chunk.js.map